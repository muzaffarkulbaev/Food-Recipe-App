<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        img {
            max-width: 150px;
            border-radius: 50%;
        }
    </style>
</head>
<body class="container py-5">

<div class="profile-container card p-4 shadow-sm">
    <h2 id="username" class="mb-3">User Name</h2>
    <img id="profilePhoto" src="" alt="Profile Photo" class="mb-3 d-block mx-auto" style="display:none;">
    <p><strong>Bio:</strong> <span id="bio"></span></p>
    <p><strong>Followers:</strong> <span id="followers"></span></p>
    <p><strong>Following:</strong> <span id="following"></span></p>
    <p><strong>Recipes:</strong> <span id="foodAmount"></span></p>
</div>

<script>
    const userId = 7;

    async function loadUserProfile() {
        try {
            const response = await axios.get(`/api/profile/account/${userId}`);
            const data = response.data;

            document.getElementById('username').textContent = data.name;
            document.getElementById('bio').textContent = data.bio || "No bio";
            document.getElementById('followers').textContent = data.followers;
            document.getElementById('following').textContent = data.following;
            document.getElementById('foodAmount').textContent = data.foodAmount;

            if (data.photoId) {
                const photoResponse = await axios.get(`/api/file/${data.photoId}`, {
                    responseType: 'blob'
                });

                const imageUrl = URL.createObjectURL(photoResponse.data);
                const profilePhoto = document.getElementById('profilePhoto');
                profilePhoto.src = imageUrl;
                profilePhoto.style.display = 'block';
            }

        } catch (error) {
            console.error("Error loading user profile:", error);
            alert("Failed to load profile");
        }
    }

    loadUserProfile();
</script>

</body>
</html>
